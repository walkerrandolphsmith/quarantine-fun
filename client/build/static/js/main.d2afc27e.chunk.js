(this["webpackJsonpcodenames-client"]=this["webpackJsonpcodenames-client"]||[]).push([[0],{20:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},26:function(e,t,n){e.exports=n(40)},31:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(17),r=n.n(l),o=n(9),i=n(10),s=n(18),u=n(19),m=n(24),d=n(25),f=n(4),b=n(3),g=(n(31),n(8)),h=n(5),p=n(20),E=n.n(p);function v(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("img",{src:E.a,className:"App-logo",alt:"logo"}),"Loading"))}var x=function(e){var t=e.children;return c.a.createElement("div",{className:"grid grid-cols-5 gap-4 p-8"},t)};function w(e){var t=e.cards,n=e.onSelect,a=e.map;return c.a.createElement(x,null,t.map((function(e,t){return c.a.createElement(j,{card:e,onClick:function(){return n(t)},owner:a[t]})})))}function j(e){var t=e.card,n=e.onClick,a=e.owner,l=0===a?"bg-indigo-700":1===a?"bg-red-700":-1===a?"bg-orange-200":"bg-gray-700";return c.a.createElement("div",{className:"md:flex bg-orange-200 rounded-lg p-6 shadow-2xl",onClick:n},c.a.createElement("img",{className:"h-16 w-16 md:h-24 md:w-24 rounded-full mx-auto md:mx-0 md:mr-6",src:"null"!==t.image?t.image:"".concat("","/unkown.png"),alt:t.text}),c.a.createElement("div",{className:"text-center md:text-left"},c.a.createElement("h2",{className:"text-2xl break-all"},"(",t.id,") ",t.text),c.a.createElement("div",{className:"rounded-full h-8 w-8 flex items-center justify-center ".concat(l)})))}function k(){var e=Object(a.useState)(null),t=Object(h.a)(e,2),n=t[0],l=t[1],r=Object(a.useState)(null),o=Object(h.a)(r,2),s=o[0],u=o[1];Object(a.useEffect)((function(){fetch("/api/getCandidateGame").then((function(e){return e.json()})).then((function(e){l(e)}))}),[]);var m=c.a.createElement("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",onClick:function(){fetch("/api/createGame",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){u(e._id)}))}},"Create Game"),d="/game/".concat(s),b="/play/".concat(s),p=c.a.createElement("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded"},c.a.createElement(f.b,{className:"block w-full",to:d},"Game Masters")),E=c.a.createElement("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded ml-8"},c.a.createElement(f.b,{className:"block w-full",to:b},"Players")),x=c.a.createElement(a.Fragment,null,p,E);return null===n?c.a.createElement(v,null):c.a.createElement(a.Fragment,null,c.a.createElement(w,Object.assign({},n,{onSelect:function(e){fetch("/api/replaceCard").then((function(e){return e.json()})).then((function(t){n.cards[e]=t,l(Object(i.a)({},n,{cards:Object(g.a)(n.cards)}))}))}})),null!==s?x:m)}var O=function(e){return 0===e?"bg-indigo-700":1===e?"bg-red-700":2===e?"bg-black-700":3===e?"bg-orange-200":-1===e?"bg-yellow-200":"bg-gray-700"};function y(e){var t=e.cards,n=e.onSelect,a=e.map,l=e.selections;return Object.keys(l).forEach((function(e){return a[e]=l[e]})),c.a.createElement(x,null,t.map((function(e,t){return c.a.createElement(N,{key:t,card:e,onClick:function(){return n(t)},owner:a[t]})})))}function N(e){var t=e.card,n=e.onClick,a=e.owner,l=O(a);return c.a.createElement("div",{className:"md:flex rounded-lg p-6 shadow-2xl ".concat(l),onClick:n},c.a.createElement("img",{className:"h-16 w-16 md:h-24 md:w-24 rounded-full mx-auto md:mx-0 md:mr-6",src:"null"!==t.image?t.image:"".concat("","/unkown.png"),alt:t.text}),c.a.createElement("div",{className:"text-center md:text-left"},c.a.createElement("h2",{className:"text-2xl break-all"},t.text)))}function S(e){e.client;var t=e.selections,n=Object(b.f)().pathname.split("/play/")[1],l=Object(a.useState)(null),r=Object(h.a)(l,2),o=r[0],i=r[1];return Object(a.useEffect)((function(){fetch("/api/play/".concat(n)).then((function(e){return e.json()})).then((function(e){i(e)})).catch((function(e){}))}),[]),null==o?c.a.createElement(v,null):c.a.createElement(y,Object.assign({},o,{onSelect:function(){},selections:t}))}function C(e){var t=e.cards,n=e.onSelect,a=e.map,l=e.selections,r=e.realtimeselections,o=[].concat(Object(g.a)(l),Object(g.a)(r)).map((function(e){return parseInt(e)}));return c.a.createElement(x,null,t.map((function(e,t){return c.a.createElement(J,{key:t,card:e,onClick:function(){return n(t)},owner:a[t],hasBeenSelected:o.includes(t)})})))}function J(e){var t=e.card,n=e.onClick,a=e.owner,l=e.hasBeenSelected,r=O(a),o=l?"":"cursor-pointer",i=l?r:"bg-orange-200";return c.a.createElement("div",{className:"md:flex rounded-lg p-6 shadow-2xl ".concat(i," ").concat(o),onClick:n},!l&&c.a.createElement("img",{className:"h-16 w-16 md:h-24 md:w-24 rounded-full mx-auto md:mx-0 md:mr-6",src:"null"!==t.image?t.image:"".concat("","/unkown.png"),alt:t.text}),c.a.createElement("div",{className:"text-center md:text-left"},c.a.createElement("h2",{className:"text-2xl break-all"},t.text),c.a.createElement("div",{className:"rounded-full h-8 w-8 flex items-center justify-center ".concat(r)})))}function B(e){var t=e.client,n=e.selections,l=Object(b.f)().pathname.split("/game/")[1],r=Object(a.useState)(null),o=Object(h.a)(r,2),i=o[0],s=o[1];return Object(a.useEffect)((function(){fetch("/api/game/".concat(l)).then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){}))}),[]),null==i?c.a.createElement(v,null):c.a.createElement(C,Object.assign({},i,{realtimeselections:Object.keys(n),onSelect:function(e){t.send(JSON.stringify({index:e,gameId:l,type:"cardselection"}))}}))}var G=new(n(23).w3cwebsocket)("ws://127.0.0.1:3003"),A=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={selections:{}},e}return Object(u.a)(n,[{key:"componentWillMount",value:function(){var e=this;G.onopen=function(){console.log("websocket connection open")},G.onerror=function(e){console.log("websocket connection error",e)},G.onmessage=function(t){try{var n=JSON.parse(t.data);"identifier"===n.type&&(G.id=n.id),"cardselection"===n.type&&console.log("card selection occured by another player",n),"revealcard"===n.type&&e.setState((function(e){return{selections:Object(i.a)({},e.selections,Object(o.a)({},n.index,n.value))}}))}catch(a){return void console.log("This doesn't look like a valid JSON: ",t.data)}}}},{key:"render",value:function(){return c.a.createElement(f.a,null,c.a.createElement(b.c,null,c.a.createElement(b.a,{path:"/game/:id"},c.a.createElement(B,{client:G,selections:this.state.selections})),c.a.createElement(b.a,{path:"/play/:id"},c.a.createElement(S,{client:G,selections:this.state.selections})),c.a.createElement(b.a,{path:"/"},c.a.createElement(k,null))))}}]),n}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.d2afc27e.chunk.js.map